<canvas
  id="ctx"
  width="500"
  height="500"
  style="border:1px solid #000000">
</canvas>

<script src="/socket.io/socket.io.js"></script>
<script>
  const ctx = document.getElementById("ctx").getContext("2d");
  ctx.font = "30px Arial"  
  
  //Initialize the connection between client and server
  const socket = io();

  socket.on("newPositions", data => {
    ctx.clearRect(0, 0, 500, 500);

    for (let i = 0; i < data.length; i++) {
      ctx.fillText(data[i].number, data[i].x, data[i].y);
    }
  })

  document.onkeydown = event => {
    if (event.code === "ArrowRight") {
      socket.emit("keyPress", {inputId: "right", state:true});
    }
    else if (event.code === "ArrowLeft") {
      socket.emit("keyPress", {inputId: "left", state:true});
    }
    else if (event.code === "ArrowUp") {
      socket.emit("keyPress", {inputId: "up", state:true});
    }
    else if (event.code === "ArrowDown") {
      socket.emit("keyPress", {inputId: "down", state:true});
    }
  }

  document.onkeyup = event => {
    if (event.code === "ArrowRight") {
      socket.emit("keyPress", {inputId: "right", state:false});
    }
    else if (event.code === "ArrowLeft") {
      socket.emit("keyPress", {inputId: "left", state:false});
    }
    else if (event.code === "ArrowUp") {
      socket.emit("keyPress", {inputId: "up", state:false});
    }
    else if (event.code === "ArrowDown") {
      socket.emit("keyPress", {inputId: "down", state:false});
    }
  }
</script>